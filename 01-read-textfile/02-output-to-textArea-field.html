
<!-- 
  Read files in JavaScript
  https://web.dev/read-files/
-->

<h1>Sitemap generator</h1>
<input type="file" id="choose-file">
<br/>
<h2>Output</h2>
<!-- https://developer.mozilla.org/en-US/docs/Web/API/HTMLTextAreaElement -->
<textarea id="output" rows="20" cols="100"></textarea>

<script>
  // Get the choose-file element
  const chooseFile = document.getElementById('choose-file');
  const output = document.getElementById('output');
  console.log("output: " + output )

  // When the element's change event is fired, do the following.
  chooseFile.addEventListener('change', (event) => {

    // Access the list of files from event.target.files, which is a FileList object.
    const file = event.target.files[0];

    // check for file type
    if ( !file.type ) {
      //status.textContent = 'Error: The File.type property does not appear to be supported on this browser.';
      return;
    }

    // Read file's content
    const reader = new FileReader();
    // Listen for the load event
    reader.addEventListener('load', fevent => {
      output.value = fevent.target.result;
    });
    reader.readAsText( file );

    // Print fileList object
    // Each item in the FileList is a File object.
    console.log( file );
  });
</script>
